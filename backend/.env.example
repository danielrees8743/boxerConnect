# BoxerConnect Backend Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# Server Configuration
# =============================================================================

# Environment: development, production, or test
NODE_ENV=development

# Server port
PORT=3001

# Server host (0.0.0.0 for Docker, localhost for local development)
HOST=localhost

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL connection URL
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://boxer:boxer_dev_password@localhost:5432/boxerconnect?schema=public

# =============================================================================
# Redis Configuration
# =============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# =============================================================================
# JWT Authentication
# =============================================================================

# JWT secret key (IMPORTANT: Use a strong, random string in production - minimum 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production-min-32-chars

# JWT access token expiration (e.g., 15m, 1h, 1d)
JWT_EXPIRES_IN=15m

# JWT refresh token secret (IMPORTANT: Use a different strong, random string)
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-in-production-min-32-chars

# JWT refresh token expiration
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# Rate Limiting
# =============================================================================

# Rate limit window in milliseconds (default: 15 minutes = 900000)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CORS Configuration
# =============================================================================

# Allowed origins (comma-separated for multiple origins)
CORS_ORIGIN=http://localhost:5173

# =============================================================================
# Logging
# =============================================================================

# Log level: error, warn, info, debug, trace
LOG_LEVEL=info

# =============================================================================
# Storage Configuration
# =============================================================================

# Storage provider: local, supabase, or s3
# - local: Store files in local filesystem (UPLOAD_PATH)
# - supabase: Store files in Supabase Storage (requires Supabase config)
# - s3: Store files in AWS S3 (not yet implemented)
STORAGE_PROVIDER=local

# External storage path for file uploads (optional, only used with local storage)
# If not set, defaults to ./uploads in the backend directory
# UPLOAD_PATH=/Volumes/Storage/BoxerConnect/uploads

# =============================================================================
# Supabase Configuration (Optional - only required when STORAGE_PROVIDER=supabase)
# =============================================================================

# Supabase project URL
# Format: https://your-project-id.supabase.co
# SUPABASE_URL=https://your-project-id.supabase.co

# Supabase anonymous (public) key
# Used for client-side operations
# Find this in: Supabase Dashboard > Settings > API > Project API keys > anon public
# SUPABASE_ANON_KEY=your-supabase-anon-key

# Supabase service role key (CRITICAL: Keep this secret!)
# Used for server-side admin operations (bypasses Row Level Security)
# Find this in: Supabase Dashboard > Settings > API > Project API keys > service_role secret
# IMPORTANT: Never expose this key in client-side code or public repositories
# SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# Supabase database connection URL (Optional - for direct database access)
# Format: postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres
# Find this in: Supabase Dashboard > Settings > Database > Connection string > URI
# Note: Replace [YOUR-PASSWORD] with your actual database password
# SUPABASE_DATABASE_URL=postgresql://postgres:your-password@db.your-project-id.supabase.co:5432/postgres

# =============================================================================
# Supabase Storage Setup Instructions
# =============================================================================
#
# 1. Create a Supabase project at https://supabase.com
#
# 2. Create a storage bucket named 'uploads':
#    - Go to Storage in the Supabase Dashboard
#    - Click 'New bucket'
#    - Name: uploads
#    - Public: Yes (to allow public access to uploaded files)
#    - File size limit: 100MB
#    - Allowed MIME types: image/*, video/*
#
# 3. Configure Row Level Security (RLS) policies for the uploads bucket:
#    - Allow public read access for all files
#    - Allow authenticated users to upload files
#    - Allow users to delete their own files
#
# 4. Copy your project credentials from Supabase Dashboard:
#    - Settings > API > Project URL → SUPABASE_URL
#    - Settings > API > Project API keys > anon public → SUPABASE_ANON_KEY
#    - Settings > API > Project API keys > service_role → SUPABASE_SERVICE_ROLE_KEY
#
# 5. Set STORAGE_PROVIDER=supabase to use Supabase Storage
#
# =============================================================================
